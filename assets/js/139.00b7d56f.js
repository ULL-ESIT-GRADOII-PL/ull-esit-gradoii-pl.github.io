(window.webpackJsonp=window.webpackJsonp||[]).push([[139],{647:function(a,s,t){"use strict";t.r(s);var n=t(5),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"frontmatter-title"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#frontmatter-title"}},[a._v("#")]),a._v(" "+a._s(a.$frontmatter.title))]),a._v(" "),t("h2",{attrs:{id:"descripcion-de-la-tarea"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#descripcion-de-la-tarea"}},[a._v("#")]),a._v(" Descripción de la Tarea")]),a._v(" "),t("p",[a._v("Queremos extender nuestra calculadora para que soporte operaciones de coma, identificadores, asignación y "),t("code",[a._v("print")]),a._v(" de manera que podamos escribir una entrada como esta:")]),a._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("➜  calc2js"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("solution git"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("develop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ✗ cat test"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("input"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("test"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("calc \na "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),a._v("i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" \nb "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("2i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" \n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("print")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("a"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("*")]),a._v("b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("p",[a._v("Cuando se llame a nuestro transpiler con esta entrada, se debe generar un programa JS que al ejecutarse en NodeJS muestre por pantalla el resultado de la operación:")]),a._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("➜  calc2js"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("solution git"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("develop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ✗ bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("calc2js"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("mjs  test"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("input"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("test"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("calc    \n#"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("!")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("usr"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("env node\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" Complex "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/Users/casianorodriguezleon/campus-virtual/2223/pl2223/practicas/drafts/calc2js-solution/src/complex.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("  \n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[a._v("print")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter"}},[a._v("x")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" $a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" $b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("$a "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("Complex")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"4"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("Complex")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"i"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" $b "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("Complex")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sub")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("Complex")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2i"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("print")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("$a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mul")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("$b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br")])]),t("h3",{attrs:{id:"analisis-de-las-dependencias-de-funciones-de-soporte"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#analisis-de-las-dependencias-de-funciones-de-soporte"}},[a._v("#")]),a._v(" Análisis de las dependencias de funciones de soporte")]),a._v(" "),t("p",[a._v("El programa JS generado incluye el código de soporte para números complejos y sólo se añade la función "),t("code",[a._v("print")]),a._v(" y no otras del catálogo de funciones de soporte como "),t("code",[a._v("factorial")]),a._v(", "),t("code",[a._v("max")]),a._v(" o "),t("code",[a._v("min")]),a._v(" que no son necesarias")]),a._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[a._v("print")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token parameter"}},[a._v("x")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=>")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" x"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("p",[a._v("Nótese como se genera la importación  del módulo "),t("code",[a._v("complex.js")]),a._v(" con la ruta en la que haya quedado la instalación del módulo")]),a._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("const")]),a._v(" Complex "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("require")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"/Users/casianorodriguezleon/campus-virtual/2223/pl2223/practicas/drafts/calc2js-solution/src/complex.js"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])]),t("h3",{attrs:{id:"analisis-de-las-variables-inicializadas"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#analisis-de-las-variables-inicializadas"}},[a._v("#")]),a._v(" Análisis de las variables inicializadas")]),a._v(" "),t("p",[a._v("Las variables que se inicializan en el fuente como  "),t("code",[a._v("a")]),a._v(" y "),t("code",[a._v("b")]),a._v(" se declaran como variables globales siguiendo al código de soporte y precediendo al programa JS generado:")]),a._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// ... Código de soporte")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" $a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" $b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("$a "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("Complex")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"4"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("add")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("Complex")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"i"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" \n $b "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("Complex")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("sub")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("Complex")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v('"2i"')]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" \n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("print")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("$a"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("mul")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("$b"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br")])]),t("h3",{attrs:{id:"evitacion-de-conflictos-con-palabras-reservadas-y-nombres-de-soporte"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#evitacion-de-conflictos-con-palabras-reservadas-y-nombres-de-soporte"}},[a._v("#")]),a._v(" Evitación de conflictos con palabras reservadas y nombres de soporte")]),a._v(" "),t("p",[a._v("Nótese también como las variables del programa de entrada se declaran con un prefijo "),t("code",[a._v("$")]),a._v(" para evitar conflictos con las variables de soporte, palabras reservadas JS, etc. en el programa JS generado. Por ejemplo, si el programa de entrada es "),t("code",[a._v("while = 4")]),a._v(" el potencial conflicto con el "),t("code",[a._v("while")]),a._v(" de JS es resuelto mediante la traducción "),t("code",[a._v("$while = 4")]),a._v(".")]),a._v(" "),t("h3",{attrs:{id:"codigo-generado"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#codigo-generado"}},[a._v("#")]),a._v(" Código generado")]),a._v(" "),t("p",[a._v("El código generado deberá poder ejecutarse correctamente con NodeJS:")]),a._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("➜  calc2js"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("solution git"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("develop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" ✗ bin"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("calc2js"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("mjs  test"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("input"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("test"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("id"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("calc "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("|")]),a._v(" node "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[a._v("re")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("10")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token literal-property property"}},[a._v("im")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("6")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br")])]),t("h2",{attrs:{id:"declaracion-de-variables"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#declaracion-de-variables"}},[a._v("#")]),a._v(" Declaración de Variables")]),a._v(" "),t("p",[a._v("Asumiremos que en nuestra calculadora, similar a como ocurre en Ruby, tan pronto una variable es inicializada se declara (en este caso en el único ámbito global).")]),a._v(" "),t("p",[a._v("Un programa que contenga el "),t("strong",[a._v("uso")]),a._v(" de una variable no inicializada/declarada debe dar un error de ejecución.\nPor ejemplo:")]),a._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("➜  scope"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("intro"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("solution git"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("scope"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("analysis"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" cat test"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("data"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("input"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("/")]),a._v("test"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("scope1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("calc \na "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("4")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),a._v("d"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+")]),a._v("i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" \nb "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("2")]),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("-")]),a._v("2i"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" \n"),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("print")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br")])]),t("p",[a._v("producirá una salida como:")]),a._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("➜  scope-intro-solution git:(scope-analysis) bin/calc2js.mjs  test/data/input/test-scope1.calc\nNot declared variable 'd'\nNot declared variable 'c'\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br")])]),t("h2",{attrs:{id:"fases-del-compilador-de-la-calculadora"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#fases-del-compilador-de-la-calculadora"}},[a._v("#")]),a._v(" Fases del Compilador de la Calculadora")]),a._v(" "),t("p",[a._v("El compilador de la calculadora se puede dividir en las siguientes fases:")]),a._v(" "),t("div",{staticClass:"language-js line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[a._v("module"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[a._v("exports")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("async")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("function")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("transpile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token parameter"}},[a._v("inputFile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" outputFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" input "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("await")]),a._v(" fs"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("readFile")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("inputFile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("'utf-8'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 1. leer la entrada")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" ast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("try")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    ast "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" p"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("parse")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("input"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("               "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 2. parsear la entrada")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("catch")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" m "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" e"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("message                   "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 3. si hay error, mostrarlo")]),a._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("error")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n  ast "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("dependencies")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("             "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 4. calcular que funciones de soporte se necesitan")]),a._v("\n  ast "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("initializedVariables")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("     "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 5. calcular que variables se inicializan paa su declaración")]),a._v("\n  ast "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("usedVariables")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("            "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 6. calcular que variables son utilizadas")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" d "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("difference")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("used"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" ast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("symbolTable"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("if")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),a._v("size "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[a._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("{")]),a._v("                    "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 7. si hay variables usadas y no inicializadas, mostrar error")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" m "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("notDeclared")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("d"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("join")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[a._v("''")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("error")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" m"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("let")]),a._v(" output "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("codeGen")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("ast"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("           "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 8. generar el código JS")]),a._v("\n  \n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("await")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token function"}},[a._v("writeCode")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("output"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" outputFile"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token comment"}},[a._v("// 9. escribir el código JS en el fichero de salida")]),a._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("return")]),a._v(" output"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br"),t("span",{staticClass:"line-number"},[a._v("25")]),t("br"),t("span",{staticClass:"line-number"},[a._v("26")]),t("br")])]),t("p",[a._v("Para las fases 4,5 y 6 deberá recorrer el AST usando "),t("code",[a._v("visit")]),a._v(" del módulo "),t("a",{attrs:{href:"/temas/tree-transformations/ast-types"}},[a._v("ast-types")]),a._v("\npara completar el código de las funciones "),t("code",[a._v("dependencies")]),a._v(", "),t("code",[a._v("initializedVariables")]),a._v(" y "),t("code",[a._v("usedVariables")]),a._v(" respectivamente.\nUtilice el módulo "),t("a",{attrs:{href:"/temas/tree-transformations/jscodeshift-recast"}},[a._v("recast")]),a._v(" para la escritura de "),t("code",[a._v("codeGen")]),a._v(".")]),a._v(" "),t("h2",{attrs:{id:"pruebas-covering-e-integracion-continua"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#pruebas-covering-e-integracion-continua"}},[a._v("#")]),a._v(" Pruebas, Covering e Integración Continua")]),a._v(" "),t("p",[a._v("Escriba las pruebas, haga un estudio de cubrimiento usando "),t("a",{attrs:{href:"https://github.com/bcoe/c8",target:"_blank",rel:"noopener noreferrer"}},[a._v("c8"),t("OutboundLink")],1),a._v(" y añada integración continua usando "),t("RouterLink",{attrs:{to:"/temas/introduccion-a-javascript/github-actions.html"}},[a._v("GitHub Actions")]),a._v(".")],1),a._v(" "),t("p",[a._v("Lea las secciones "),t("RouterLink",{attrs:{to:"/temas/introduccion-a-javascript/mocha.html#mocha"}},[a._v("Testing with Mocha")]),a._v(" y "),t("a",{attrs:{href:"/temas/introduccion-a-javascript/jest"}},[a._v("Jest")]),a._v(".")],1),a._v(" "),t("h2",{attrs:{id:"documentacion"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#documentacion"}},[a._v("#")]),a._v(" Documentación")]),a._v(" "),t("p",[t("a",{attrs:{href:"/temas/introduccion-a-javascript/documentation"}},[a._v("Documente")]),a._v("\nel módulo incorporando un "),t("code",[a._v("README.md")]),a._v(" y la documentación de la función exportada usando "),t("RouterLink",{attrs:{to:"/temas/introduccion-a-javascript/documentation.html"}},[a._v("JsDoc")]),a._v(".\nLea la sección "),t("RouterLink",{attrs:{to:"/temas/introduccion-a-javascript/creating-and-publishing-npm-module.html#documenting-the-javascript-sources"}},[a._v("Documenting the JavaScript Sources")])],1),a._v(" "),t("h2",{attrs:{id:"references"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#references"}},[a._v("#")]),a._v(" References")]),a._v(" "),t("ul",[t("li",[t("a",{attrs:{href:"/temas/tree-transformations/ast-types"}},[a._v("ast-types")])]),a._v(" "),t("li",[t("a",{attrs:{href:"/temas/tree-transformations/jscodeshift-recast"}},[a._v("recast")])]),a._v(" "),t("li",[a._v("More on JSCodeshift in the article "),t("a",{attrs:{href:"https://www.toptal.com/javascript/write-code-to-rewrite-your-code",target:"_blank",rel:"noopener noreferrer"}},[a._v("Write Code to Rewrite Your Code: jscodeshift"),t("OutboundLink")],1),a._v(" by Jeremy Greer")]),a._v(" "),t("li",[a._v("See "),t("a",{attrs:{href:"/temas/tree-transformations/tree-transformations-references"}},[a._v("Tree  Transformations References")])])])])}),[],!1,null,null,null);s.default=e.exports}}]);